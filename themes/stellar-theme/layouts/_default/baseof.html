<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }} | {{ site.Title }}{{ end }}</title>
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
    <meta property="og:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}">
    <meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else if .IsHome }}{{ site.Params.subtitle }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}">
    <meta property="og:image" content="{{ if .Params.images }}{{ .Params.images | first | absURL }}{{ else }}/images/background.jpg{{ end }}">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:site_name" content="{{ site.Title }}">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}">
    <meta name="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else if .IsHome }}{{ site.Params.subtitle }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}">
    <meta name="twitter:image" content="{{ if .Params.images }}{{ .Params.images | first | absURL }}{{ else }}/images/background.jpg{{ end }}">

    {{/* Article-specific metadata */}}
    {{ if not .IsHome }}
    {{ if .Date }}<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
    {{ if .Params.categories }}{{ range first 1 .Params.categories }}<meta property="article:section" content="{{ . }}">{{ end }}{{ end }}
    {{ if site.Params.author.name }}<meta property="article:author" content="{{ site.Params.author.name }}">{{ end }}
    {{ end }}
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="{{ "/" | relURL }}" class="logo">{{ site.Title }}</a>
                <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢æ·±è‰²æ¨¡å¼">
                    ğŸŒ“ æ·±è‰²æ¨¡å¼
                </button>
            </div>
        </div>
    </header>

    <main class="container">
        {{ block "main" . }}{{ end }}
    </main>

    <footer>
        <div class="container">
            <p>{{ site.Title }}</p>
        </div>
    </footer>

    <script>
        // æ·±è‰²æ¨¡å¼åˆ‡æ¢
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;

        // ä» localStorage è¯»å–ä¸»é¢˜è®¾ç½®
        const currentTheme = localStorage.getItem('theme') || 'light';
        if (currentTheme === 'dark') {
            html.classList.add('dark');
            themeToggle.textContent = 'â˜€ï¸ æµ…è‰²æ¨¡å¼';
        }

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            const theme = html.classList.contains('dark') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
            themeToggle.textContent = theme === 'dark' ? 'â˜€ï¸ æµ…è‰²æ¨¡å¼' : 'ğŸŒ“ æ·±è‰²æ¨¡å¼';
        });
    </script>
</body>
</html>
